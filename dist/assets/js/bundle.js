!function(e){var n={};function t(s){if(n[s])return n[s].exports;var i=n[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=n,t.d=function(e,n,s){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:s})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(t.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(s,i,function(n){return e[n]}.bind(null,i));return s},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=2)}([function(e,n,t){"use strict";t.r(n),t.d(n,"colors",(function(){return s})),t.d(n,"key_ivory",(function(){return i})),t.d(n,"key_ebony_b",(function(){return o})),t.d(n,"key_ebony_h",(function(){return a})),t.d(n,"simple_ivory",(function(){return l})),t.d(n,"simple_ebony_b",(function(){return c})),t.d(n,"simple_ebony_h",(function(){return d}));const s=["#828282","#AD766A","#D5404A","#FFB11B","#90B44B","#58B2DC","#005CAF","#A8497A","#E87A90"],i=["A0","B0","C1","D1","E1","F1","G1","A1","B1","C2","D2","E2","F2","G2","A2","B2","C3","D3","E3","F3","G3","A3","B3","C4","D4","E4","F4","G4","A4","B4","C5","D5","E5","F5","G5","A5","B5","C6","D6","E6","F6","G6","A6","B6","C7","D7","E7","F7","G7","A7","B7","C8"],o=["Bb0","Db1","Eb1","Gb1","Ab1","Bb1","Db2","Eb2","Gb2","Ab2","Bb2","Db3","Eb3","Gb3","Ab3","Bb3","Db4","Eb4","Gb4","Ab4","Bb4","Db5","Eb5","Gb5","Ab5","Bb5","Db6","Eb6","Gb6","Ab6","Bb6","Db7","Eb7","Gb7","Ab7","Bb7"],a=["Ah0","Ch1","Dh1","Fh1","Gh1","Ah1","Ch2","Dh2","Fh2","Gh2","Ah2","Ch3","Dh3","Fh3","Gh3","Ah3","Ch4","Dh4","Fh4","Gh4","Ah4","Ch5","Dh5","Fh5","Gh5","Ah5","Ch6","Dh6","Fh6","Gh6","Ah6","Ch7","Dh7","Fh7","Gh7","Ah7"],l=["1","2","3","4","5","6","7"],c=["b2","b3","b5","b6","b7"],d=["#1","#2","#4","#5","#6"]},function(e,n,t){"use strict";t.r(n),t.d(n,"i18n",(function(){return s}));const s=new VueI18n({locale:"tc",messages:{en:{text:{__song_title:"Please enter the song title.",__song_title_point:"Double click can modify the song title."},toolbox:{__delete_note:"Delete this note",__space_note:"Space note",__add_line:"Add new line",__copy_line:"Copy this line",__move_up_line:"Move this line up",__move_down_line:"Move this line down",__show_piano:"Open the piano",__hidden_piano:"Close the piano",__switch_mode:"Switch Mode",__output_result:"Output as picture",__function_description:"How to use?",__switch_lang:"繁體中文"},colorarea:{__color_title:"Please choose a color.",__check:"OK",__cancel:"Cancel"},notice:{__size_warn:"Please turn the phone to landscape.",__capturing:"Working..."}},tc:{text:{__song_title:"請輸入歌名",__song_title_point:"雙擊修改歌名"},toolbox:{__delete_note:"刪除音符",__space_note:"空格音符",__add_line:"新增一行",__copy_line:"複製此行",__move_up_line:"上移此行",__move_down_line:"下移此行",__show_piano:"開啟鋼琴",__hidden_piano:"關閉鋼琴",__switch_mode:"切換模式",__output_result:"輸出圖片",__function_description:"功能說明",__switch_lang:"English"},colorarea:{__color_title:"請選擇顏色",__check:"確定",__cancel:"取消"},notice:{__size_warn:"直式不可以看",__capturing:"努力處理中..."}}}});new Vue({el:"#app",i18n:s,methods:{switchLanguage:function(){let e=this.$i18n.locale;this.$i18n.locale="tc"==e?"en":"tc"}}})},function(e,n,t){t(3),t(0),e.exports=t(1)},function(e,n,t){"use strict";t.r(n);var s=t(0),i=t(1);$((function(){setTimeout((function(){$(".loading").fadeOut()}),1e3);let e=$(".piano"),n=$(".slide"),t=$(".text"),o=t.find(".number-panel"),a=t.find(".tabs-panel"),l=$(".toolbox"),c=$("#toolbox-btn"),d=$(".toolbutton"),r=d.eq(6),p=d.eq(7),u=d.eq(9),h=$(".colorarea"),_=($(".colorbox"),$(".intro-wrap")),f=$(".intro-wrap .ctr-btn"),b=$(".screenshot-wrap"),y=$(".screenshot-wrap .ctr-btn"),v=0,g=$(".note.selected"),k=$(".line.selected");function m(){g=$(".note.selected"),k=$(".line.selected")}function C(e,n){e.find(".line").removeClass("selected"),e.find(".note").removeClass("selected"),n.addClass("selected"),n.parent(".line").addClass("selected"),m()}function w(e,n,t,s){let i=e.find(".line.selected"),l=e.find(".note.selected");e.find(".note").removeClass("selected");let c="whitespace"!=t?t.replace(/h/,"#"):t,d=`<div data-key="${t}" title="${c}" class="note selected ${t}" style="background-color: ${s};">${n}</div>`;0!=l.length?l.after(d):i.append(d),e.find(".note.selected").on("click",(function(n){let t=i.index(),s=$(this).index();switch(e){case o:s++;break;case a:s--}C(e.siblings(".panel"),e.siblings(".panel").find(".line").eq(t).children().eq(s)),C(e,$(this))})),m()}function x(e){let n=e.find(".note.selected"),t=n.prev(".note"),s=n.next(".note");0!=t.length?t.addClass("selected"):0!=s.length&&s.addClass("selected"),n.remove(),m()}function A(e,n){n.hasClass("selected")||(e.find(".line").removeClass("selected"),e.find(".note").removeClass("selected"),n.addClass("selected"),n.find(".note").last().addClass("selected"),m())}function D(e,n){if(e.find(".line").length>1){let t=n.prev(".line"),s=n.next(".line");e.find(".line").removeClass("selected"),e.find(".note").removeClass("selected"),0!=t.length?(t.find(".note").last().addClass("selected"),t.addClass("selected")):0!=s.length&&(s.find(".note").last().addClass("selected"),s.addClass("selected")),n.remove()}else e.find(".line").removeClass("selected"),e.find(".note").removeClass("selected"),n.children().not(".del").not(".line-bg").remove(),n.addClass("selected");m()}function B(e){let n="\n            <div class='line selected' title='雙擊修改區塊顏色'>\n                <div class=\"del\" title=\"刪除\">X</div>\n            </div>";e==a&&(n="\n                <div class='line selected' title='雙擊修改區塊顏色'>\n                    <div class='line-bg'><span></span><span></span><span></span><span></span><span></span></div>\n                    <div class=\"del\" title=\"刪除\">X</div>\n                </div>");let t=e.find(".line.selected");e.find(".line.selected").removeClass("selected"),0!=t.length?t.after(n):e.append(n),e.find(".note.selected").removeClass("selected");let s=e.find(".line.selected");s.on("dblclick",(function(n){!function(e,n){h.show();var t=n.css("border-left-color"),s=j(parseInt(O(t).red),parseInt(O(t).green),parseInt(O(t).blue));$(".colorbtn").removeClass("selected"),$(".colorbtn").each((function(e){let n=$(this).css("backgroundColor"),t=j(parseInt(O(n).red),parseInt(O(n).green),parseInt(O(n).blue));s==t&&$(this).addClass("selected")}));var i=s;$(".colorbtn").on("click",(function(){var e=$(this).css("backgroundColor"),n=parseInt(O(e).red),t=parseInt(O(e).green),s=parseInt(O(e).blue);i=j(n,t,s),$(".colorbtn").removeClass("selected"),$(this).addClass("selected")})),$(".checkbtn").on("click",(function(){n.css("border-left-color",i),h.hide(),$(this).unbind();let t=n.index();e.siblings(".panel").find(".line").eq(t).css("border-left-color",i)}))}(e,$(this))})),s.on("click",(function(n){let t=s.index();A(e.siblings(".panel"),e.siblings(".panel").find(".line").eq(t)),A(e,s)})),s.find(".del").on("click",(function(n){let t=s.index();D(e.siblings(".panel"),e.siblings(".panel").find(".line").eq(t)),D(e,s)})),m()}function G(e,n){let t=e.find(".line.selected"),s="";switch(n){case"up":s=e.find(".line.selected").prev(".line"),t.insertBefore(s);break;case"down":s=e.find(".line.selected").next(".line"),t.insertAfter(s)}}function E(e,n){switch(e){case"line":let e="";"up"==n?e=k.prev(".line"):"down"==n&&(e=k.next(".line")),0!=e.length&&($(".line").removeClass("selected"),e.addClass("selected")),$(".note").removeClass("selected"),o.find(".line.selected .note").last().addClass("selected"),a.find(".line.selected .note").last().addClass("selected");break;case"note":let t="";"left"==n?t=g.prev(".note"):"right"==n&&(t=g.next(".note")),0!=t.length&&($(".note").removeClass("selected"),t.addClass("selected"))}m()}function F(e){let n=document.getElementById(e);n.pause(),n.currentTime=0,n.play()}function I(){v=e.scrollLeft()}function P(s){switch(s){case"close":t.stop().animate({height:"100%"},300),l.stop().animate({height:"100%"},300),e.stop().animate({bottom:"-30%"},300),n.hide(),I(),r.css("display","block"),p.css("display","none");break;case"open":t.stop().animate({height:"70%"},300),l.stop().animate({height:"70%"},300),e.stop().animate({bottom:"0"},300),n.show(),e.animate({scrollLeft:v},0),r.css("display","none"),p.css("display","block")}}r.css("display","none"),e.animate({scrollLeft:"3000vw"},500),I(),function(){e.append('<div class="group_left"></div>');let n=$(".group_left");n.append(`<div class="ivory"><span>${s.simple_ivory[5]}</span></div>`),n.append(`<div class="ivory"><span>${s.simple_ivory[6]}</span></div>`),n.find("span").css({background:s.colors[0]}),n.append('<div class="ebony-wrap ebony_0"></div>');let t=n.find(".ebony_0");t.append(`<div class="ebony_child"><span>${s.simple_ebony_h[4]}</span></div>`),t.append(`<div class="ebony_child"><span>${s.simple_ebony_b[4]}</span></div>`),n.find(".ebony_child").find("span").css({background:s.colors[0]}),n.find(".ivory").each((function(e){$(this).append(`<div class="key">${s.key_ivory[e]}</div>`),$(this).append(`<audio id="${s.key_ivory[e]}" preload="auto"><source src="./dist/assets/audio/Piano.ff.${s.key_ivory[e]}.mp3" type="audio/mpeg"></audio>`)})),n.find(".ebony_0").each((function(e){t.find(".ebony_child").each((function(n){n<1?$(this).append(`<div data-name="${s.key_ebony_h[e]}" class="key">${s.key_ebony_h[e]}</div>`):$(this).append(`<div data-name="${s.key_ebony_b[e]}" class="key">${s.key_ebony_b[e]}</div>`),$(this).append(`<audio id="${s.key_ebony_b[e]}" preload="auto"><source src="./dist/assets/audio/Piano.ff.${s.key_ebony_b[e]}.mp3" type="audio/mpeg"></audio>`)}))}));for(let n=0;n<7;n++)e.append('<div class="group"></div>');$(".group").each((function(e){$(this).css({left:14.28+50*e+"%"});for(let e=0;e<=6;e++)$(this).append(`<div class="ivory"><span>${s.simple_ivory[e]}</span></div>`);$(this).find("span").css({background:s.colors[e+1]});for(let e=1;e<=5;e++)$(this).append(`<div class="ebony-wrap ebony_${e}"></div>`);for(let e=0;e<5;e++){let n=$(this).find(".ebony_"+(e+1));n.append(`<div class="ebony_child"><span>${s.simple_ebony_h[e]}</span></div>`),n.append(`<div class="ebony_child"><span>${s.simple_ebony_b[e]}</span></div>`)}$(this).find(".ebony_child").find("span").css({background:s.colors[e+1]}),$(this).find(".ivory").each((function(n){$(this).append(`<div class="key">${s.key_ivory[2+7*e+n]}</div>`),$(this).append(`<audio id="${s.key_ivory[2+7*e+n]}"><source src="./dist/assets/audio/Piano.ff.${s.key_ivory[2+7*e+n]}.mp3" type="audio/mpeg"></audio>`)}));for(let n=0;n<5;n++)$(this).find(".ebony_"+(n+1)).each((function(t){$(this).find(".ebony_child").each((function(t){t<1?$(this).append(`<div data-name="${s.key_ebony_h[1+5*e+n]}" class="key">${s.key_ebony_h[1+5*e+n]}</div>`):$(this).append(`<div data-name="${s.key_ebony_b[1+5*e+n]}" class="key">${s.key_ebony_b[1+5*e+n]}</div>`),$(this).append(`<audio id="${s.key_ebony_b[1+5*e+n]}"><source src="./dist/assets/audio/Piano.ff.${s.key_ebony_b[1+5*e+n]}.mp3" type="audio/mpeg"></audio>`)}))}))})),e.append('<div class="group_right"></div>');let i=$(".group_right");i.append(`<div class="ivory"><span>${s.simple_ivory[0]}</span></div>`),i.find("span").css({background:s.colors[8]}),i.find(".ivory").each((function(){$(this).append(`<div class="key">${s.key_ivory[s.key_ivory.length-1]}</div>`),$(this).append(`<audio id="${s.key_ivory[s.key_ivory.length-1]}"><source src="./dist/assets/audio/Piano.ff.${s.key_ivory[s.key_ivory.length-1]}.mp3" type="audio/mpeg"></audio>`)}))}(),B(o),B(a),$(".title").on("dblclick",(function(e){var n=function(e){var n=document.createElement("div");n.innerHTML=e;var t=n.innerText||n.textContent;return n=null,t}($(this).html()),t=prompt(i.i18n.t("text.__song_title"),n);null!=t&&$(this).text(t)})),c.on("click",(function(e){l.toggleClass("closed"),t.toggleClass("full")})),$(".cancelbtn").on("click",(function(e){h.hide()})),f.on("click",(function(e){_.removeClass("active"),u.removeClass("selected")})),y.on("click",(function(e){b.removeClass("active")}));let q=isMobile.phone?"touchstart":"mousedown",M=isMobile.phone?"touchend":"mouseup";function O(e){var n=e.match(/rgba?\((\d{1,3}), ?(\d{1,3}), ?(\d{1,3})\)?(?:, ?(\d(?:\.\d?))\))?/);return n?{red:parseInt(n[1]),green:parseInt(n[2]),blue:parseInt(n[3])}:{}}function S(e){var n=e.toString(16);return 1==n.length?"0"+n:n}function j(e,n,t){return"#"+S(e)+S(n)+S(t)}$(".ivory").each((function(e){$(this).on(q,(function(e){$(this).css({background:"#f2f2f2"}),w(o,$(this).find("span").text(),$(this).find(".key").text(),$(this).find("span").css("background-color")),w(a,$(this).find("span").text(),$(this).find(".key").text(),$(this).find("span").css("background-color")),F($(this).find(".key").text())})).on(M,(function(e){$(this).css({background:"#fff"})}))})),$(".ebony_child").each((function(e){$(this).on(q,(function(e){$(this).css({background:"#444"}),w(o,$(this).find("span").text(),$(this).find(".key").data("name"),$(this).find("span").css("background-color")),w(a,$(this).find("span").text(),$(this).find(".key").data("name"),$(this).find("span").css("background-color")),F($(this).find(".key").text())})).on(M,(function(e){$(this).css({background:"#000"})}))})),d.each((function(e){$(this).on(q,(function(n){switch($(this).addClass("selected"),e){case 0:x(o),x(a);break;case 1:w(o,"","whitespace","rgba(255, 255, 255, 0.2)"),w(a,"","whitespace","rgba(255, 255, 255, 0.2)");break;case 2:B(o),B(a);break;case 3:!function(){let e=k.eq(0).contents().not(".del").not(".line-bg").clone();B(o),B(a);for(let n=0;n<e.length;n++){let t=e.eq(n);w(o,t.text(),t.data("key"),t.css("background-color")),w(a,t.text(),t.data("key"),t.css("background-color"))}m()}();break;case 4:G(o,"up"),G(a,"up");break;case 5:G(o,"down"),G(a,"down");break;case 6:P("open");break;case 7:P("close");break;case 8:o.toggleClass("open"),a.toggleClass("open");break;case 9:b.addClass("active"),function(){let e=$("#capture");e.addClass("capturing"),e.scrollTop(0);let n=$("#output");n.empty(),html2canvas(document.querySelector("#capture")).then((t=>{n.append(t),e.removeClass("capturing")}))}();break;case 10:_.addClass("active")}})).on(M,(function(e){$(this).removeClass("selected")}))})),isMobile.phone||$(window).on("keydown",(function(e){switch(e.keyCode){case 8:x(o),x(a);break;case 13:B(o),B(a);break;case 32:w(o,"","whitespace","rgba(255, 255, 255, 0.2)"),w(a,"","whitespace","rgba(255, 255, 255, 0)");break;case 65:E("note","left");break;case 87:E("line","up");break;case 68:E("note","right");break;case 83:E("line","down")}}))}))}]);